<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>用户登录</title>
    <script src="../js/jquery.js"></script>
    <link rel="stylesheet" href="../css/index.css" />
  </head>
  <body>
    <div class="container">
      <h1>RIB</h1>
      <form action="">
        <input type="text" class="tbx" placeholder="账号" />
        <input type="password" class="tbx" placeholder="密码" />
        <input type="submit" class="sub" placeholder="登录" />
      </form>
    </div>

    <script>
      //定义一个con绑定 .container
      const con = document.querySelector(".container");

      //定义两个函数开关
      let isIn = true;
      let isOut = false;

      var span; //给未给出的元素取个名字

      //添加监听
      //监听鼠标进去的事件
      con.addEventListener("mouseenter", (e) => {
        if (isIn) {
          //取到进入的鼠标位置
          //生成元素的位置=进入点距离窗口的距离-父盒子距窗口的距离
          let inX = e.clientX - e.target.offsetLeft;
          let inY = e.clientY - e.target.offsetTop;

          //创建span元素，并且给它对应的出生zuobiao
          let el = document.createElement("span");
          el.style.left = inX + "px";
          el.style.top = inX + "px";

          //添加到con对应的父元素
          con.appendChild(el);

          $(".container span").removeClass("out");
          $(".container span ").addClass("in");
          span = document.querySelector(".container span");
          isIn = false;
          isOut = true;
        }
      });

      //监听鼠标出去的事件
      con.addEventListener("mouseleave", (e) => {
        if (isOut) {
          // 获取出去的鼠标位置
          // 生成元素的位置=出去点距离窗口的距离-父盒子距离窗口的距离
          let outX = e.clientX - e.target.offsetLeft;
          let outY = e.clientY - e.target.offsetTop;

          $(".container span").removeClass("in"); // 移除进入的动画
          $(".container span").addClass("out"); // 添加出去的动画
          // 添加出去的坐标
          $(".out").css("left", outX + "px");
          $(".out").css("top", outY + "px");

          isOut = false; // 关闭出去的门
          // 当动画结束后再删除元素
          setTimeout(() => {
            con.removeChild(span); // 删除元素
            isIn = true; // 打开进入的门
          }, 500);
        }
      });
    </script>
  </body>
</html>
